<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouFloww - Focus Timer & To-Do List</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="refresh-warning">
        <i class="fas fa-exclamation-triangle"></i> Warning: Refreshing will end your current session but your progress will be saved.
    </div>

    <main>
        <section>
            <h1 id="main-heading">YouFloww ‚è±Ô∏è</h1>
            <p>Enter your flow state. Stay focused. Build consistency.</p>
            <div id="status">Work Session</div>
            <div id="timer">25:00</div>
            
            <div class="controls-container">
                <div class="control-group">
                    <h3><i class="fas fa-clock"></i> Timer</h3>
                    <div class="button-grid">
                        <button id="startPauseBtn" class="btn-primary"><i class="fas fa-play"></i> Start</button>
                        <button id="resetBtn" class="btn-neutral"><i class="fas fa-redo"></i> Reset</button>
                        <button id="endSessionBtn" class="btn-danger"><i class="fas fa-stop"></i> End</button>
                        <button id="focusModeBtn" class="btn-secondary"><i class="fas fa-expand"></i> Focus</button>
                    </div>
                </div>
                
                <div class="control-group">
                    <h3><i class="fas fa-volume-up"></i> Sound</h3>
                    <div class="control-toggles">
                        <button id="noiseBtn" class="btn-neutral"><i class="fas fa-music"></i> Noise</button>
                        <div class="dropdown">
                            <button id="ambienceBtn" class="btn-neutral"><i class="fas fa-cloud"></i> Ambience</button>
                            <div class="dropdown-content">
                                <button id="snowBtn" class="btn-small"><i class="fas fa-snowflake"></i> Snow</button>
                                <button id="rainBtn" class="btn-small"><i class="fas fa-cloud-rain"></i> Rain</button>
                                <button id="sakuraBtn" class="btn-small"><i class="fas fa-leaf"></i> Sakura</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="control-group">
                    <h3><i class="fas fa-tv"></i> Background</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px; width: 100%;">
                        <input type="text" id="youtube-input" placeholder="YouTube URL" style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #444; background: #2a2a2a; color: white;">
                        <div style="display: flex; gap: 5px;">
                            <button id="setYoutubeBtn" class="btn-small"><i class="fas fa-check"></i> Set</button>
                            <button id="removeYoutubeBtn" class="btn-small btn-danger"><i class="fas fa-times"></i> Remove</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <div id="todo-container">
                <h2><i class="fas fa-tasks"></i> To-Do List</h2>
                <div id="todo-input-container">
                    <input type="text" id="todo-input" placeholder="Add a new task..." aria-label="Add a new task">
                    <button id="add-todo-btn" class="btn-secondary"><i class="fas fa-plus"></i> Add</button>
                </div>
                <ul id="todo-list"></ul>
                <button class="clear-todos-btn btn-danger"><i class="fas fa-trash"></i> Clear All</button>
            </div>
        </section>
    </main>

    <div id="coinContainer">
        <div><i class="fas fa-coins"></i> Coins: <span id="coinCount">0</span></div>
        <button onclick="openStats()"><i class="fas fa-chart-line"></i> Stats</button>
    </div>

    <div id="statsModal" class="modal">
        <div id="statsContent" class="modal-content">
            <span class="close-btn" onclick="closeStats()">&times;</span>
            <h2>Your Progress üìà</h2>
            <p id="streak">üî• Streak: 0 days</p>
            <p id="sessionsToday">üìä Sessions today: 0</p>
            <p id="weeklyFocus">‚è≥ Focused this week: 0h 0m</p>
            
            <div class="tabs">
                <div class="tab active" onclick="switchTab('stats')"><i class="fas fa-chart-bar"></i> Stats</div>
                <div class="tab" onclick="switchTab('history')"><i class="fas fa-history"></i> History</div>
                <div class="tab" onclick="switchTab('profile')"><i class="fas fa-user"></i> Profile</div>
                <div class="tab" onclick="switchTab('store')"><i class="fas fa-store"></i> Store</div>
                <div class="tab" onclick="switchTab('settings')"><i class="fas fa-cog"></i> Settings</div>
            </div>
            
            <div id="statsContainer" class="tab-content active">
                <div id="barChartContainer" class="chart-container">
                    <div class="chart-title">Daily Focus (hours)</div>
                    <canvas id="barChart"></canvas>
                </div>
                <div id="pieChartContainer" class="chart-container">
                    <div class="chart-title">Session Types</div>
                    <canvas id="pieChart"></canvas>
                </div>
            </div>
            
            <div id="historyContainer" class="tab-content">
                <div class="chart-container">
                    <div class="chart-title">Weekly History</div>
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th>Week Starting</th>
                                <th>Total Focus</th>
                                <th>Sessions</th>
                                <th>Days Active</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody"></tbody>
                    </table>
                </div>
            </div>
            
            <div id="profileContainer" class="tab-content">
                <div class="chart-container">
                    <div class="chart-title">Your Profile</div>
                    <p>Name: <span id="profileName">Floww User</span></p>
                    <p>Total Focus Time: <span id="totalFocusTime">0h 0m</span></p>
                    <p>Total Sessions: <span id="totalSessions">0</span></p>
                    <p>Total Coins Earned: <span id="totalCoinsEarned">0</span></p>
                    <div class="stats-actions">
                        <button onclick="changeProfileName()"><i class="fas fa-edit"></i> Change Name</button>
                    </div>
                </div>
            </div>
            
            <div id="storeContainer" class="tab-content">
                <div class="chart-container">
                    <div class="chart-title">Customize Your Experience</div>
                    <p>Select a theme or a live wallpaper for your session.</p>
                    <div id="storeItems">
                        <div class="store-item" data-type="image" data-path="https://images.unsplash.com/photo-1542831371-d648083a23de?q=80&w=2070&auto=format&fit=crop">
                            <span>üåÜ Cosmic Background</span>
                            <button>Set</button>
                        </div>
                        <div class="store-item" data-type="youtube" data-id="4wJRkS-M-3s">
                            <span>üé¨ Lofi Study Cafe</span>
                            <button>Set</button>
                        </div>
                        <div class="store-item" data-type="youtube" data-id="NJuSStkIZBg">
                            <span>üåßÔ∏è Cozy Rainy Night</span>
                            <button>Set</button>
                        </div>
                        <div class="store-item" data-type="youtube" data-id="Dx5qFachdxc">
                            <span>üöÄ Space Journey</span>
                            <button>Set</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="settingsContainer" class="tab-content">
                <div class="chart-container">
                    <div class="chart-title">Timer Settings</div>
                    <p>Set your preferred Pomodoro durations (in minutes).</p>
                    <div class="settings-grid">
                        <label for="work-duration">Work Session:</label>
                        <input type="number" id="work-duration" min="1">
                        <label for="short-break-duration">Short Break:</label>
                        <input type="number" id="short-break-duration" min="1">
                        <label for="long-break-duration">Long Break:</label>
                        <input type="number" id="long-break-duration" min="1">
                    </div>
                    <button id="saveSettingsBtn" class="btn-primary"><i class="fas fa-save"></i> Save Settings</button>
                </div>
            </div>
            
            <div class="stats-actions">
                <button id="exportDataBtn" onclick="exportData()"><i class="fas fa-download"></i> Export Data</button>
                <button id="clearDataBtn" onclick="clearAllData()" class="btn-danger"><i class="fas fa-trash"></i> Clear All Data</button>
            </div>
        </div>
    </div>

    <audio id="whiteNoise" loop><source src="whitenoise.mp3" type="audio/mpeg"></audio>
    <audio id="pauseAlertSound"><source src="https://actions.google.com/sounds/v1/ui/close_button_pressed.ogg" type="audio/ogg"></audio>
    <audio id="resumeAlertSound"><source src="https://actions.google.com/sounds/v1/ui/button_press.ogg" type="audio/ogg"></audio>

    <audio class="start-sound" src="start-sound1.mp3"></audio>
    <audio class="start-sound" src="start-sound2.mp3"></audio>
    <audio class="start-sound" src="start-sound3.mp3"></audio>
    <audio class="start-sound" src="start-sound4.mp3"></audio>

    <audio class="good-meme" src="good-meme1.mp3"></audio>
    <audio class="good-meme" src="good-meme2.mp3"></audio>
    <audio class="good-meme" src="good-meme3.mp3"></audio>
    <audio class="good-meme" src="good-meme4.mp3"></audio>

    <audio class="bad-meme" src="bad-meme1.mp3"></audio>
    <audio class="bad-meme" src="bad-meme2.mp3"></audio>
    <audio class="bad-meme" src="bad-meme3.mp3"></audio>
    <audio class="bad-meme" src="bad-meme4.mp3"></audio>

    <aside>
        <div id="cornerWidget">
            <div class="progress-label"><span>Day Progress</span><span id="dayProgressPercent"></span></div>
            <div class="progress-bar-container"><div id="dayProgressBar" class="progress-bar"></div></div>
            <div class="progress-label"><span>Month Progress</span><span id="monthProgressPercent"></span></div>
            <div class="progress-bar-container"><div id="monthProgressBar" class="progress-bar"></div></div>
            <div class="progress-label"><span>Year Progress</span><span id="yearProgressPercent"></span></div>
            <div class="progress-bar-container"><div id="yearProgressBar" class="progress-bar"></div></div>
        </div>
    </aside>

    <div id="ambient-container"></div>
    <div id="video-background-container"></div>

    <div id="focusModeUI">
        <div id="focusModeTimer"></div>
        <div id="focusModeProgressBarContainer">
            <div id="focusModeProgressBar"></div>
        </div>
        <div id="focusModeControls">
            <button id="focusModePlayPauseBtn" aria-label="Play/Pause">
                <span class="icon"></span>
            </button>
            <button id="focusModeExitBtn" aria-label="Exit Focus Mode">
                <span class="icon"></span>
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>
